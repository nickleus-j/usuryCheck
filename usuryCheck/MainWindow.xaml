<Window x:Class="usuryCheck.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:local="clr-namespace:usuryCheck"
        mc:Ignorable="d"
        Title="Usury Detector" Height="420" Width="720">
    <Window.Resources>
        <!-- Simple numeric textbox style: right-align -->
        <Style x:Key="NumericTextBox" TargetType="TextBox">
            <Setter Property="HorizontalContentAlignment" Value="Right"/>
        </Style>
    </Window.Resources>

    <Grid Margin="2">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!-- Title bar -->
        <Border Padding="12" Background="#FFFBD8D8" CornerRadius="6" Grid.Row="0">
            <DockPanel>
                <TextBlock Text="Usury Detector" FontSize="20" FontWeight="Bold" />
                <TextBlock Text="  – Enter Data" Foreground="#667" Margin="6,0,0,0"/>
            </DockPanel>
        </Border>

        <!-- Inputs -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="24"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left column -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Principal -->
                <StackPanel Orientation="Horizontal" Grid.Row="0" VerticalAlignment="Center">
                    <TextBlock Text="Principal Amount:" Width="100" VerticalAlignment="Center"/>
                    <TextBox Style="{StaticResource NumericTextBox}" Width="180" FontFamily="Cascadia Mono SemiBold"
                             Text="{Binding Principal, UpdateSourceTrigger=PropertyChanged}" FontSize="14"/>
                </StackPanel>

                <!-- Term -->
                <StackPanel Orientation="Horizontal" Grid.Row="2" VerticalAlignment="Center">
                    <TextBlock Text="Term (months):" Width="100" VerticalAlignment="Center" FontSize="14"/>
                    <TextBox Style="{StaticResource NumericTextBox}" Width="180"
                             Text="{Binding TermMonths, UpdateSourceTrigger=PropertyChanged}" FontFamily="Cascadia Mono SemiBold" FontSize="14"/>
                </StackPanel>

                <!-- Jurisdiction -->
                <StackPanel Orientation="Horizontal" Grid.Row="4" VerticalAlignment="Center">
                    <TextBlock Text="Jurisdiction:" Width="100" VerticalAlignment="Center"/>
                    <ComboBox Width="220"
                              ItemsSource="{Binding Jurisdictions}"
                              SelectedItem="{Binding SelectedJurisdiction}"/>
                </StackPanel>

                <!-- Include fees -->
                <CheckBox Grid.Row="6"
                          Content="Include fees in APR"
                          IsChecked="{Binding IncludeFeesInAPR}"/>
            </Grid>

            <!-- Right column -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Annual Rate -->
                <StackPanel Orientation="Horizontal" Grid.Row="0" VerticalAlignment="Center">
                    <TextBlock Text="Annual Rate (%):" Width="100" VerticalAlignment="Center"/>
                    <TextBox Style="{StaticResource NumericTextBox}" Width="180" FontFamily="Cascadia Mono SemiBold"
                             Text="{Binding AnnualRatePercent, UpdateSourceTrigger=PropertyChanged}" FontSize="14"/>
                </StackPanel>

                <!-- Up-front fees -->
                <StackPanel Orientation="Horizontal" Grid.Row="2" VerticalAlignment="Center">
                    <TextBlock Text="Up-front Fees:" Width="100" VerticalAlignment="Center"/>
                    <TextBox Style="{StaticResource NumericTextBox}" Width="180" FontFamily="Cascadia Mono SemiBold"
                             Text="{Binding UpfrontFees, UpdateSourceTrigger=PropertyChanged}" FontSize="14"/>
                </StackPanel>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" Grid.Row="4" HorizontalAlignment="Left" >
                    <local:CurrencyCompo x:Name="CurrencyField" Currency="{Binding CurrentCurrency, Mode=TwoWay}"/>
                    <Button Content="Calculate" Width="110" Height="32" 
                            Command="{Binding CalculateCommand}" Background="#FF8EE078" FontFamily="Noto Sans JP Medium"/>
                    <Button Content="Reset" Width="90" Height="32" Background="#FF6F0B71" FontFamily="Noto Sans JP Medium"
                            Command="{Binding ResetCommand}" Foreground="White"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- Result panel -->
        <Border Grid.Row="4" Padding="12" BorderBrush="#CCD3DB" BorderThickness="1" CornerRadius="6">
            <DockPanel>
                <TextBlock Text="⚖" FontSize="22" Margin="0,0,8,0" VerticalAlignment="Top"/>
                <StackPanel>
                    <TextBlock Text="{Binding ResultTitle}" FontSize="16" FontWeight="Bold"/>
                    <TextBlock Text="{Binding ResultDetail}" TextWrapping="Wrap" Margin="0,6,0,0" FontFamily="MS Gothic"/>
                    <StackPanel x:Name="DetailsPanel" Margin="0,8,0,0">
                    </StackPanel>
                </StackPanel>
            </DockPanel>
        </Border>
    </Grid>
</Window>
